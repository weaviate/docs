---
title: Vectorizer and vector index config
sidebar_label: Vectorizer and vector index
sidebar_position: 2
image: og/docs/howto.jpg
---

import SkipLink from "/src/components/SkipValidationLink";
import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import FilteredTextBlock from "@site/src/components/Documentation/FilteredTextBlock";
import PyCode from "!!raw-loader!/_includes/code/howto/manage-data.collections.py";
import PyCodeV3 from "!!raw-loader!/_includes/code/howto/manage-data.collections-v3.py";
import TSCode from "!!raw-loader!/_includes/code/howto/manage-data.collections.ts";
import TSCodeLegacy from "!!raw-loader!/_includes/code/howto/manage-data.collections-v2.ts";
import JavaCode from "!!raw-loader!/_includes/code/howto/java/src/test/java/io/weaviate/docs/manage-data.classes.java";
import GoCode from "!!raw-loader!/_includes/code/howto/go/docs/manage-data.classes_test.go";

import VectorConfigSyntax from "/_includes/vector-config-syntax.mdx";

<VectorConfigSyntax />

## Specify a vectorizer

Specify a `vectorizer` for a collection.

<details>
  <summary>Additional information</summary>

Collection level settings override default values and general configuration parameters such as [environment variables](/deploy/configuration/env-vars/index.md).

- [Available model integrations](../model-providers/index.md)
- [Vectorizer configuration references](/weaviate/config-refs/collections.mdx#vector-configuration)

</details>

<Tabs groupId="languages">
  <TabItem value="py" label="Python Client v4">
    <FilteredTextBlock
      text={PyCode}
      startMarker="# START Vectorizer"
      endMarker="# END Vectorizer"
      language="py"
    />
  </TabItem>

<TabItem value="py3" label="Python Client v3">
  <FilteredTextBlock
    text={PyCodeV3}
    startMarker="# START Vectorizer"
    endMarker="# END Vectorizer"
    language="pyv3"
  />
</TabItem>

<TabItem value="js" label="JS/TS Client v3">
  <FilteredTextBlock
    text={TSCode}
    startMarker="// START Vectorizer"
    endMarker="// END Vectorizer"
    language="ts"
  />
</TabItem>

<TabItem value="js2" label="JS/TS Client v2">
  <FilteredTextBlock
    text={TSCodeLegacy}
    startMarker="// START Vectorizer"
    endMarker="// END Vectorizer"
    language="tsv2"
  />
</TabItem>

<TabItem value="java" label="Java">
  <FilteredTextBlock
    text={JavaCode}
    startMarker="// START CreateCollectionWithVectorizer"
    endMarker="// END CreateCollectionWithVectorizer"
    language="java"
  />
</TabItem>

<TabItem value="go" label="Go">
  <FilteredTextBlock
    text={GoCode}
    startMarker="// START CreateCollectionWithVectorizer"
    endMarker="// END CreateCollectionWithVectorizer"
    language="gonew"
  />
</TabItem>

</Tabs>

## Specify vectorizer settings

import VectorsAutoSchemaError from "/_includes/error-note-vectors-autoschema.mdx";

<VectorsAutoSchemaError />

To configure how a vectorizer works (i.e. what model to use) with a specific collection, set the vectorizer parameters.

<Tabs groupId="languages">
  <TabItem value="py" label="Python Client v4">
    <FilteredTextBlock
      text={PyCode}
      startMarker="# START ModuleSettings"
      endMarker="# END ModuleSettings"
      language="py"
    />
  </TabItem>

<TabItem value="py3" label="Python Client v3">
  <FilteredTextBlock
    text={PyCodeV3}
    startMarker="# START ModuleSettings"
    endMarker="# END ModuleSettings"
    language="pyv3"
  />
</TabItem>

<TabItem value="js" label="JS/TS Client v3">
  <FilteredTextBlock
    text={TSCode}
    startMarker="// START ModuleSettings"
    endMarker="// END ModuleSettings"
    language="ts"
  />
</TabItem>

<TabItem value="js2" label="JS/TS Client v2">
  <FilteredTextBlock
    text={TSCodeLegacy}
    startMarker="// START ModuleSettings"
    endMarker="// END ModuleSettings"
    language="tsv2"
  />
</TabItem>

<TabItem value="java" label="Java">
  <FilteredTextBlock
    text={JavaCode}
    startMarker="// START ModuleSettings"
    endMarker="// END ModuleSettings"
    language="java"
  />
</TabItem>

<TabItem value="go" label="Go">
  <FilteredTextBlock
    text={GoCode}
    startMarker="// START ModuleSettings"
    endMarker="// END ModuleSettings"
    language="gonew"
  />
</TabItem>

</Tabs>

## Define named vectors

:::info Added in `v1.24`
:::

You can define multiple [named vectors](../concepts/data.md#multiple-vector-embeddings-named-vectors) per collection. This allows each object to be represented by multiple vector embeddings, each with its own vector index.

As such, each named vector configuration can include its own vectorizer and vector index settings.

<Tabs groupId="languages">
  <TabItem value="py" label="Python Client v4">
    <FilteredTextBlock
      text={PyCode}
      startMarker="# START BasicNamedVectors"
      endMarker="# END BasicNamedVectors"
      language="py"
    />
  </TabItem>

<TabItem value="py3" label="Python Client v3">
  <FilteredTextBlock
    text={PyCodeV3}
    startMarker="# START BasicNamedVectors"
    endMarker="# END BasicNamedVectors"
    language="pyv3"
  />
</TabItem>

<TabItem value="js" label="JS/TS Client v3">
  <FilteredTextBlock
    text={TSCode}
    startMarker="// START BasicNamedVectors"
    endMarker="// END BasicNamedVectors"
    language="ts"
  />
</TabItem>

<TabItem value="js2" label="JS/TS Client v2">
  <FilteredTextBlock
    text={TSCodeLegacy}
    startMarker="// START BasicNamedVectors"
    endMarker="// END BasicNamedVectors"
    language="tsv2"
  />
</TabItem>

<TabItem value="java" label="Java">
  <FilteredTextBlock
    text={JavaCode}
    startMarker="// START CreateCollectionWithNamedVectors"
    endMarker="// END CreateCollectionWithNamedVectors"
    language="java"
  />
</TabItem>

<TabItem value="go" label="Go">
  <FilteredTextBlock
    text={GoCode}
    startMarker="// START CreateCollectionWithNamedVectors"
    endMarker="// END CreateCollectionWithNamedVectors"
    language="gonew"
  />
</TabItem>

</Tabs>

## Add new named vectors

:::info Added in `v1.31`
:::

Named vectors can be added to existing collection definitions with named vectors. (This is not possible for collections without named vectors.)

<Tabs groupId="languages">
  <TabItem value="py" label="Python Client v4">
    <FilteredTextBlock
      text={PyCode}
      startMarker="# START AddNamedVectors"
      endMarker="# END AddNamedVectors"
      language="py"
    />
  </TabItem>
  <TabItem value="js" label="JS/TS Client v3">
<FilteredTextBlock
      text={TSCode}
      startMarker="// START AddNamedVectors"
      endMarker="// END AddNamedVectors"
      language="js"
    />
  </TabItem>
  <TabItem value="java" label="Java">

```java
// Java support coming soon
```

  </TabItem>
  <TabItem value="go" label="Go">

```go
// Go support coming soon
```

  </TabItem>
</Tabs>

:::caution Objects aren't automatically revectorized
Adding a new named vector to the collection definition [won't trigger vectorization for existing objects](../concepts/data.md#adding-a-named-vector-after-collection-creation). Only new or updated objects will receive embeddings for the newly added named vector definition.
:::

## Define multi-vector embeddings (e.g. ColBERT, ColPali)

:::info Added in `v1.29`, `v1.30`
:::

Multi-vector embeddings, also known as multi-vectors, represent a single object with multiple vectors, i.e. a 2-dimensional matrix. Multi-vectors are currently only available for HNSW indexes for named vectors. To use multi-vectors, enable it for the appropriate named vector.

<Tabs groupId="languages">
  <TabItem value="py" label="Python Client v4">
    <FilteredTextBlock
      text={PyCode}
      startMarker="# START MultiValueVectorCollection"
      endMarker="# END MultiValueVectorCollection"
      language="py"
    />
  </TabItem>
    <TabItem value="js" label="JS/TS Client v3">
  <FilteredTextBlock
        text={TSCode}
        startMarker="// START MultiValueVectorCollection"
        endMarker="// END MultiValueVectorCollection"
        language="js"
      />
  </TabItem>
  <TabItem value="java" label="Java">
    <FilteredTextBlock
      text={JavaCode}
      startMarker="// START MultiValueVectorCollection"
      endMarker="// END MultiValueVectorCollection"
      language="java"
    />
  </TabItem>
</Tabs>

:::tip Use quantization and encoding to compress your vectors
Multi-vector embeddings use up more memory than single vector embeddings. You can use [vector quantization](../configuration/compression/index.md) and [encoding](../configuration/compression/multi-vectors.md#muvera-encoding) to compress them and reduce memory usage.
:::

## Set vector index type

The vector index type can be set for each collection at creation time, between `hnsw`, `flat` and `dynamic` index types.

<Tabs groupId="languages">
  <TabItem value="py" label="Python Client v4">
    <FilteredTextBlock
      text={PyCode}
      startMarker="# START SetVectorIndexType"
      endMarker="# END SetVectorIndexType"
      language="py"
    />
  </TabItem>

<TabItem value="py3" label="Python Client v3">
  <FilteredTextBlock
    text={PyCodeV3}
    startMarker="# START SetVectorIndexType"
    endMarker="# END SetVectorIndexType"
    language="pyv3"
  />
</TabItem>

<TabItem value="js" label="JS/TS Client v3">
  <FilteredTextBlock
    text={TSCode}
    startMarker="// START SetVectorIndexType"
    endMarker="// END SetVectorIndexType"
    language="ts"
  />
</TabItem>

<TabItem value="js2" label="JS/TS Client v2">
  <FilteredTextBlock
    text={TSCodeLegacy}
    startMarker="// START SetVectorIndexType"
    endMarker="// END SetVectorIndexType"
    language="tsv2"
  />
</TabItem>

<TabItem value="java" label="Java">
  <FilteredTextBlock
    text={JavaCode}
    startMarker="// START SetVectorIndexType"
    endMarker="// END SetVectorIndexType"
    language="java"
  />
</TabItem>

  <TabItem value="go" label="Go">
    <FilteredTextBlock
      text={GoCode}
      startMarker="// START SetVectorIndexType"
      endMarker="// END SetVectorIndexType"
      language="gonew"
    />
  </TabItem>
</Tabs>

<details>
  <summary>Additional information</summary>

- Read more about index types & compression in [Concepts: Vector index](../concepts/indexing/vector-index.md).

</details>

## Set vector index parameters

Set vector index parameters such as [compression](../configuration/compression/index.md) and [filter strategy](../concepts/filtering.md#filter-strategy) through collection configuration. Some parameters can be [updated later](collection-operations.mdx#update-a-collection-definition) after collection creation.

:::info Filter strategy parameter
Was added in `v1.27`
:::

<Tabs groupId="languages">
  <TabItem value="py" label="Python Client v4">
    <FilteredTextBlock
      text={PyCode}
      startMarker="# START SetVectorIndexParams"
      endMarker="# END SetVectorIndexParams"
      language="py"
    />
  </TabItem>

<TabItem value="py3" label="Python Client v3">
  <FilteredTextBlock
    text={PyCodeV3}
    startMarker="# START SetVectorIndexParams"
    endMarker="# END SetVectorIndexParams"
    language="pyv3"
  />
</TabItem>

<TabItem value="js" label="JS/TS Client v3">
  <FilteredTextBlock
    text={TSCode}
    startMarker="// START SetVectorIndexParams"
    endMarker="// END SetVectorIndexParams"
    language="ts"
  />
</TabItem>

<TabItem value="js2" label="JS/TS Client v2">
  <FilteredTextBlock
    text={TSCodeLegacy}
    startMarker="// START SetVectorIndexParams"
    endMarker="// END SetVectorIndexParams"
    language="tsv2"
  />
</TabItem>

<TabItem value="java" label="Java">
  <FilteredTextBlock
    text={JavaCode}
    startMarker="// START SetVectorIndexParams"
    endMarker="// END SetVectorIndexParams"
    language="java"
  />
</TabItem>

  <TabItem value="go" label="Go">
    <FilteredTextBlock
      text={GoCode}
      startMarker="// START SetVectorIndexParams"
      endMarker="// END SetVectorIndexParams"
      language="gonew"
    />
  </TabItem>
</Tabs>

<details>
  <summary>Additional information</summary>

- Read more about index types & compression in [Concepts: Vector index](../concepts/indexing/vector-index.md).

</details>

## Property-level settings

Configure individual properties in a collection. Each property can have it's own configuration. Here are some common settings:

- Vectorize the property
- Vectorize the property name
- Set a [tokenization type](../config-refs/collections.mdx#tokenization)

<Tabs groupId="languages">
  <TabItem value="py" label="Python Client v4">
    <FilteredTextBlock
      text={PyCode}
      startMarker="# START PropModuleSettings"
      endMarker="# END PropModuleSettings"
      language="py"
    />
  </TabItem>

<TabItem value="py3" label="Python Client v3">
  <FilteredTextBlock
    text={PyCodeV3}
    startMarker="# START PropModuleSettings"
    endMarker="# END PropModuleSettings"
    language="pyv3"
  />
</TabItem>

<TabItem value="js" label="JS/TS Client v3">
  <FilteredTextBlock
    text={TSCode}
    startMarker="// START PropModuleSettings"
    endMarker="// END PropModuleSettings"
    language="ts"
  />
</TabItem>

<TabItem value="js2" label="JS/TS Client v2">
  <FilteredTextBlock
    text={TSCodeLegacy}
    startMarker="// START PropModuleSettings"
    endMarker="// END PropModuleSettings"
    language="tsv2"
  />
</TabItem>

<TabItem value="java" label="Java">
  <FilteredTextBlock
    text={JavaCode}
    startMarker="// START PropModuleSettings"
    endMarker="// END PropModuleSettings"
    language="java"
  />
</TabItem>

  <TabItem value="go" label="Go">
    <FilteredTextBlock
      text={GoCode}
      startMarker="// START PropModuleSettings"
      endMarker="// END PropModuleSettings"
      language="gonew"
    />
  </TabItem>
</Tabs>

## Specify a distance metric

If you choose to bring your own vectors, you should specify the `distance metric`.

<Tabs groupId="languages">
  <TabItem value="py" label="Python Client v4">
    <FilteredTextBlock
      text={PyCode}
      startMarker="# START DistanceMetric"
      endMarker="# END DistanceMetric"
      language="py"
    />
  </TabItem>

<TabItem value="py3" label="Python Client v3">
  <FilteredTextBlock
    text={PyCodeV3}
    startMarker="# START DistanceMetric"
    endMarker="# END DistanceMetric"
    language="pyv3"
  />
</TabItem>

<TabItem value="js" label="JS/TS Client v3">
  <FilteredTextBlock
    text={TSCode}
    startMarker="// START DistanceMetric"
    endMarker="// END DistanceMetric"
    language="ts"
  />
</TabItem>

<TabItem value="js2" label="JS/TS Client v2">
  <FilteredTextBlock
    text={TSCodeLegacy}
    startMarker="// START DistanceMetric"
    endMarker="// END DistanceMetric"
    language="tsv2"
  />
</TabItem>

<TabItem value="java" label="Java">
  <FilteredTextBlock
    text={JavaCode}
    startMarker="// START DistanceMetric"
    endMarker="// END DistanceMetric"
    language="java"
  />
</TabItem>

  <TabItem value="go" label="Go">
    <FilteredTextBlock
      text={GoCode}
      startMarker="// START DistanceMetric"
      endMarker="// END DistanceMetric"
      language="gonew"
    />
  </TabItem>
</Tabs>

<details>
  <summary>
     Additional information
  </summary>

For details on the configuration parameters, see the following:

- [Distances](../config-refs/distances.md)
- [Vector indexes](../config-refs/indexing/vector-index.mdx)

</details>

## Further resources

- <SkipLink href="/weaviate/api/rest#tag/schema/post/schema">API References: REST: Schema</SkipLink>
- [References: Configuration: Schema](/weaviate/config-refs/collections.mdx)
- [Concepts: Data structure](../concepts/data.md)

## Questions and feedback

import DocsFeedback from "/_includes/docs-feedback.mdx";

<DocsFeedback />

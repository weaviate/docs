---
sidebar_label: Production Readiness Self-Assessment
---

# Kubernetes 本番環境準備セルフアセスメント

本番環境への準備は万端でしょうか？ Weaviate クラスターを本番環境向けに整えるには、綿密な計画、適切な構成、そして継続的なメンテナンスが必要です。安定して信頼できるデプロイを実現するためには、*始めに* こそ *終わり* を見据えることが重要です。本ガイドでは、本番環境にワークロードを移行する前に準備状況を評価し、潜在的なギャップを特定するための内省的な質問を提供します。

:::tip
もしギャップが見つかった場合は、ぜひ SE (Solutions Engineer) にご連絡ください。本番環境で成功するためのサポートを受けられます。
:::

### 高可用性とレジリエンス

- [ ] クラスターを複数の可用性ゾーン (AZ) やリージョンに分散してデプロイし、ダウンタイムを防いでいますか？
- [ ] Weaviate を 3 ノード以上の高可用構成で実行していますか？
- [ ] ノード障害時にもデータのコピーが利用できるよう、スキーマでレプリケーション係数を 3 に設定していますか？
- [ ] レプリカを複数ノードに配置し、冗長性を確保していますか？
- [ ] コントロールプレーンは高可用ですか？
- [ ] アプリケーションはコントロールプレーンがなくても障害耐性がありますか？
- [ ] ノードの自動修復や自己回復メカニズムを導入していますか？
- [ ] フェイルオーバーシナリオをテストし、レジリエンスを検証しましたか？
- [ ] Weaviate のバックアップ機能を災害復旧に活用していますか？
    - [ ] これらのメカニズムはどのくらいの頻度でテストしていますか？
    - [ ] ノード障害やデータベース破損からの復旧をテストしましたか？
- [ ] バックアップの保持期間を検討していますか？
  - [ ] 古いバックアップをクリーンアップする方法を定義していますか？
- [ ] ローリングアップデートを実施し、ダウンタイムを回避していますか？
- [ ] カナリアリリースを行い、新しいリリースを安全にテストしていますか？
- [ ] 変更を安全にテストできる開発またはテスト環境がありますか？

### データ取り込みとクエリパフォーマンス

- [ ] 高負荷の取り込みを処理するための戦略がありますか？
- [ ] インデックス作成とクエリ処理に割り当てるリソースの割合を決めていますか？
- [ ] 取り込み前にデータの重複排除とクリーンアップを行う戦略がありますか？
- [ ] データはどのくらいの頻度で追加、更新、削除されますか？
  - [ ] データはインプレース更新ですか、それとも追記が中心ですか？
  - [ ] 削除操作に伴うガーベジコレクションはどのくらいの頻度で発生しますか？
- [ ] 大規模な取り込みジョブ用にスケジューリング戦略を実装していますか？
- [ ] 負荷下でクエリパフォーマンスをテストしましたか？
  - [ ] Prometheus や Grafana を用いてクエリパフォーマンスを監視していますか？
- [ ] 負荷分散とフェイルオーバーをサポートするためにレプリカシャードを配置していますか？

### リソース管理

- [ ] データの利用パターンを検討していますか？
    - [ ] ワークロード需要に合わせてメモリ割り当てを適正化していますか？
    - [ ] ストレージやコンピュートの割り当ても需要に合わせて適正化していますか？
    - [ ] 古いオブジェクトや未使用オブジェクトを削除するプロセスがありますか？
- [ ] 読み取り負荷が高いワークロードを分散させるため、複数レプリカを設定していますか？
- [ ] ニーズに合ったストレージクラスを選択していますか？
    - [ ] ストレージクラスはボリューム拡張をサポートし、将来的な成長に対応できますか？
- [ ] クラスター内のデータ (永続ストレージを含む) を適切にバックアップしていますか？
- [ ] シャーディング戦略はデータセットのサイズとアクセスパターンに合っていますか？
- [ ] メモリ管理のために `GOMEMLIMIT` を適切に設定していますか？
  - [ ] `GOMEMLIMIT` をシステムの利用可能メモリに基づいて設定し、過度なガーベジコレクション停止を防いでいますか？
- [ ] メモリ要件を削減するため、ベクトル量子化技術を検討していますか？

### テナント状態管理

- [ ] マルチテナンシーを実装していますか？
  - [ ] ノイジーネイバー問題を回避するため、テナントごとの制限やクォータを設定していますか？
- [ ] アクティブでないテナントデータをオフロードする戦略がありますか？

### セキュリティ

- [ ] クラスターのコンポーネント間通信に SSL/TLS と信頼できる証明書を使用していますか？
- [ ] *最小権限の原則* を遵守していますか？
- [ ] コンテナのセキュリティデフォルトを正しく設定していますか？
- [ ] クラスターへのアクセスを厳密に制限していますか？
- [ ] [RBAC](/weaviate/configuration/rbac/index.mdx) を実装し、アクセスを制限していますか？
- [ ] Pod 間通信を制限するネットワークポリシーを実装していますか？
- [ ] シークレットを K8s Secrets または Vault ソリューションで保護していますか？
- [ ] シークレットの漏えい、キーや証明書の紛失、シークレットのローテーションが必要な場合のプロセスがありますか？

### 監視とオブザーバビリティ

- [ ] ロギングを実装していますか？
    - [ ] 収集したログを中央集約していますか？
- [ ] Prometheus (または Alloy、DataDog など) を使用してメトリクス収集を有効にしていますか？
- [ ] Grafana でヘルスとパフォーマンスのメトリクスを可視化していますか？
- [ ] イベントに対してアラートを設定していますか？

これらの重要分野を評価することで、高可用でレジリエントかつ効率的なデプロイを構築し、ビジネスのニーズに合わせてスケールさせることができます。ここで挙げたセルフアセスメントの質問に対応することで、潜在的なリスクを事前に特定し、デプロイの信頼性を最大化できます。 

## 質問とフィードバック

import DocsFeedback from '/_includes/docs-feedback.mdx';

<DocsFeedback/>


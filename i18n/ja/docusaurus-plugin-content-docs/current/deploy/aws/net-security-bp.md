---
title: ネットワーク セキュリティ ベスト プラクティス
description: "Weaviate デプロイメントにおけるネットワーク セキュリティを最大化するための専門家による推奨事項。"
---

# ベスト プラクティスとヒント

このページでは、AWS 固有のネットワーク セキュリティ ベスト プラクティスを Weaviate デプロイメント向けにまとめています。ここでは、Weaviate デプロイメントを保護するために設計されたネットワーク セキュリティ アーキテクチャについて説明します。

:::tip 

- 一般的なベスト プラクティスが必要な場合は [こちら](/docs/weaviate/best-practices/index.md) をご覧ください。

- デプロイメント固有のベスト プラクティスが必要な場合は [こちら](/docs/deploy/faqs/index.md) をご覧ください。

:::

### 堅牢なネットワーク セキュリティ アーキテクチャが実現すること

- ネットワーク分割とアクセス制御により攻撃対象領域を最小化します。  
- セキュリティ境界を維持しつつ自動スケーリングを可能にします。  
- 包括的なディザスター リカバリーにより高可用性を確保します。  
- エンドツーエンドの可観測性と脅威検知を提供します。  
- セキュアな管理アクセス パターンを確立します。  

### アクセス制御

アクセス制御は本ネットワーク セキュリティ戦略の要です。ゼロトラスト モデルを実装し、いかなるリソースも本質的に信頼せず、すべてのアクセス要求を継続的に検証します。

#### プライベート サブネット戦略

ネットワークの分離は本戦略の基盤です。クリティカル インフラストラクチャは、インターネットへの直接接続がないプライベート サブネットに配置します。これによりインターネット ベースの攻撃を排除し、すべてのアクセスを制御されたエントリ ポイント経由に限定します。

#### コア コンポーネント

- 制御されたアウトバウンド インターネット アクセスを提供する NAT ゲートウェイ付きプライベート サブネット  
- すべての管理アクセスに対する MFA  
- 最小権限の原則を実現するセキュリティ グループによる粒度の高い権限制御  
- WAF が統合された ALB  

#### アクセス パターン

- インバウンド トラフィックはロード バランサーとセキュリティ グループでフィルタリング  
- アウトバウンド トラフィックはログ付き NAT ゲートウェイで制御  
- 管理アクセスには VPN と強力な認証を必須化  
- 組織構造に沿った RBAC  

#### 管理アクセスを保護する VPN 戦略

- 企業オフィス接続用のサイトツーサイト VPN  
- 管理アクセス用に個別証明書を用いたクライアント VPN  
- 高可用性を実現するマルチ AZ VPN ゲートウェイ  

### Kubernetes アクセス制御

#### 管理コントロール

- すべての `kubectl` アクセスには確立済み VPN 接続が必要  
- 企業 IDP との統合  
- すべての管理操作に MFA を適用  
- セッション タイムアウトとアクティビティ モニタリングを実施  

### 多層防御を備えたネットワーク アーキテクチャ

ネットワーク セグメンテーションでセキュリティ境界を作成し、侵害時の影響範囲を制限します。本多層防御戦略では水平および垂直の両方向でセグメンテーションを実装します。

#### アプリケーション層のセグメンテーション

アプリケーション層には顧客向けサービスとビジネス ロジック コンポーネントを配置します。

- 環境ごと（開発・ステージング・本番）に専用サブネットを用意  
- すべての HTTP/HTTPS インバウンド トラフィックを検査する WAF  
- Kubernetes ネットワーク ポリシーによるコンテナ ネットワークの分離  
- API ゲートウェイによる認証とレート制限の強制  

#### データベース層の分離

データベース層（Weaviate がデプロイされる場所）は、機密データを格納する可能性があるため強化されたセキュリティが必要です。

- インターネット ルートを持たないプライベート サブネット  
- データベース アクティビティ モニタリングと監査ログ  
- 定期的なセキュリティ パッチ適用と脆弱性評価  
- 制限付きアクセスのバックアップ システムを分離サブネットに配置  

#### 監視インフラストラクチャ

集中型の監視と可観測性インフラは、セキュリティ インシデント時にブラインド スポットを防ぐため特別な配慮が必要です。

- 監視システムの侵害を防ぐための分離サブネット  
- 監視システム用に分離された管理アクセス経路  
- 監視システムへのラテラル ムーブメントを防ぐネットワーク レベルの分離  
- 許可された担当者のみに監視データを限定するアクセス制御  

### VPC エンドポイントとプライベート接続

CloudWatch VPC エンドポイントを実装すると監視データのインターネット ルーティングを排除できます。設定には以下が必要です。

- 各アベイラビリティ ゾーンでのインターフェイス VPC エンドポイントのデプロイ  
- シームレスなサービス統合のための DNS 解決設定  
- 監視ソースからの HTTPS トラフィックを許可するセキュリティ グループ ルール  
- CloudWatch API 呼び出しを VPC エンドポイントへ向けるルート テーブル設定  

#### セキュリティ上の利点

- 監視データがパブリック インターネットに到達しません。  
- インターネット ゲートウェイ依存を排除することで攻撃対象領域を削減します。  
- 監視データ送信に対するネットワーク レベルのアクセス制御を実現します。  
- データ レジデンシー要件へのコンプライアンスを確保します。  

#### 安全なデータ操作のための S3 VPC エンドポイント

バックアップやアプリケーション データの転送を保護するためには、次の構成が必要です。

- S3 トラフィックを VPC エンドポイント経由に誘導するルート テーブル エントリ  
- VPC エンドポイント トラフィックにアクセスを制限するバケット ポリシー  
- S3 リソースへアクセス可能なサービスを制御する IAM ポリシー  
- すべての S3 API 操作の CloudTrail ログ記録  

#### パフォーマンスとセキュリティの最適化

- S3 トラフィックに対する NAT ゲートウェイ コストを削減  
- AWS 経由でのデータ転送パフォーマンスを向上  
- ネットワーク レベルの保護によりインターネット経由のデータ流出を防止  
- コンプライアンス監査用に AWS Config と統合  



### スケーリングとパフォーマンス戦略

#### アプリケーションロードバランサー ( ALB ) の構成

#### SSL/TLS 管理

- AWS Certificate Manager による証明書の自動プロビジョニング。
- すべての接続で PFS を有効化。
- HTTP から HTTPS へのリダイレクトにより、暗号化されていない通信を防止。

#### WAF 統合

- 一般的な Web 脆弱性から保護する WAF ルール。
- アプリケーション固有の脅威パターンに基づくカスタムルール。
- OWASP Top 10 を保護するマネージドルールセット。
- ブロックされたリクエストに関するリアルタイムメトリクスとアラート。

#### ヘルスチェック構成

- サービスの機能を検証するアプリケーション固有のヘルスチェック。
- データベース接続を確認する多層ヘルスチェック。
- スケーリングイベント中に非正常ターゲットをグレースフルに処理。
- 詳細なサービスステータスを提供するカスタムヘルスチェックエンドポイント。

### オートスケーリングのセキュリティ考慮事項

安全なスケーリングポリシーにより、容量変化時でもセキュリティ体制を維持します。

#### スケーリングトリガー

- セキュリティ調整済みしきい値を用いた CPU 利用率。
- セキュリティツールのオーバーヘッドを考慮したメモリ使用率。
- セキュリティイベント率を含むカスタムメトリクス。
- 過去のパターンと脅威インテリジェンスに基づく予測スケーリング。

#### スケーリング時のセキュリティ

- 新規インスタンスに対するセキュリティグループの自動更新。
- ユーザーデータスクリプトを介したセキュリティツールのデプロイ。
- 一貫したセキュリティベースラインを確保する構成管理。
- 新規インスタンスへの即時の可視性を提供するモニタリング統合。

### 高可用性とディザスタリカバリ

#### マルチ AZ アーキテクチャ

#### Weaviate 構成

- **最小** 3 つのレプリカを AZ 全体に分散。
- 自動フェイルオーバーおよび AZ 間レプリケーション。
- S3 への自動バックアップとリージョン間レプリケーション。

### 可観測性とモニタリング

#### Grafana インフラストラクチャ

- システムヘルスとセキュリティメトリクス用の集中ダッシュボード。
- 通知疲れを防ぐ階層化アラート。
- インシデントレスポンスシステムとの統合。

#### ネットワーク可視化

- セキュリティ分析のためにトラフィックメタデータを取得する VPC フローログ。
- Real0time ストリーミングを SIEM へ。
- ベースライン確立と異常検出。

#### セキュリティモニタリング

- 行動分析と脅威インテリジェンスを用いた脅威検出。
- インシデント作成とレスポンスワークフローの自動化。
- フォレンジックデータの収集と保全機能。

### サービスメッシュセキュリティ

#### Istio 導入

Istio は、サービス間通信に包括的なセキュリティと可観測性を提供するサービスメッシュです。

#### 主な機能

- **Mutual TLS ( mTLS ):** すべてのサービス通信を自動で暗号化・認証。
- **証明書管理:** 証明書の自動プロビジョニング、ローテーション、失効。
- **ID 検証:** 通信確立前に Pod レベルで認証。

Istio にはゼロトラストモデルもあり、次の機能を備えています:

- 明示的な通信許可を必要とするデフォルト拒否ポリシー。
- すべてのサービスリクエストに対する継続的な ID 検証。
- セキュリティとデプロイ要件を満たす細粒度のトラフィックポリシー。

#### 利点

- アプリケーションコードを変更せずに暗号化を実現。
- すべてのサービスにわたるポリシーの集中適用。
- 詳細なトラフィック分析とセキュリティモニタリング。

### Kubernetes ネットワークポリシー

#### Calico または Cilium の導入

- Pod レベルのセグメンテーションを持つ高度なネットワークポリシー機能。
- 最適なパフォーマンスのための eBPF ベースの適用。
- HTTP/gRPC をサポートするアプリケーション認識型ポリシー。

#### ポリシーフレームワーク

- **デフォルト拒否:** すべてのトラフィックをデフォルトでブロック。
- **Namespace 分離:** 無許可の名前空間間通信を防止。
- **選択的許可:** 必要な通信のための明示的ルール。
- **GitOps 管理:** バージョン管理されたポリシーのデプロイとテスト。

#### 実装

- ネットワークポリシーは Pod 間のラテラルムーブメントを防ぐべきです。
- サービスメッシュとの統合による一貫した適用。
- ポリシーの定期的な監査と最適化。
- ポリシーの有効性を担保する自動テスト。

### フレームワーク準拠

当社の AWS 向けベストプラクティスは、次のセキュリティフレームワークに準拠しています:

- **NIST Cybersecurity framework:** 識別、保護、検知、対応、復旧を包括的にカバー。
- **ISO 27001:** 情報セキュリティマネジメントシステムの実装。
- **SOC 2:** セキュリティ、可用性、機密性に関する Trust Services Criteria への準拠。

### 追加リソースおよび情報

- [監視ドキュメント](../configuration/monitoring.md)
- [レプリケーション ドキュメント](../configuration/replication.md)
- [バックアップ ドキュメント](../configuration/backups.md)

## 質問とフィードバック

import DocsFeedback from '/_includes/docs-feedback.mdx';

<DocsFeedback/>


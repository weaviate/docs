---
title: 認可
sidebar_position: 6
description: " Weaviate Cloud クラスター向け Role-Based Access Control (RBAC) 設定ガイド。"
image: og/wcd/user_guides.jpg
---

import Link from '@docusaurus/Link';
import WCDCreateRole from '/docs/cloud/img/weaviate-cloud-roles-create.png';
import WCDCreateRoleForm from '/docs/cloud/img/weaviate-cloud-roles-create-form.png';
import WCDEditRole from '/docs/cloud/img/weaviate-cloud-roles-edit.png';
import WCDEditRoleForm from '/docs/cloud/img/weaviate-cloud-roles-edit-form.png';
import WCDDeleteRole from '/docs/cloud/img/weaviate-cloud-roles-delete.png';
import WCDDeleteRoleForm from '/docs/cloud/img/weaviate-cloud-roles-delete-form.png';

import RestartTheCluster from '/_includes/wcs/restart-warning.mdx';

:::info

このガイドは、 RBAC（Role-Based Access Control）が有効になっているクラスターにのみ適用されます。 Weaviate バージョン `v1.30`（以降）で作成された新しいクラスターでは、デフォルトで RBAC が有効になっています。

:::

## ロールの作成

カスタムロールを使用すると、異なるユーザーやアプリケーションがあなたの Weaviate クラスターへアクセスする際の詳細な権限を定義できます。コレクション、テナント、特定の操作へのアクセスを制御できます。

<div class="row">
  <div class="col col--4">
    <ol>
      <li>
        <span> </span> <Link to="https://console.weaviate.cloud"> Weaviate Cloud コンソール</Link>を開きます。
      </li>
      <li>
        <Link to="/cloud/manage-clusters/status#select-your-cluster">
          クラスターを選択
        </Link>{' '}
        し、<code>Roles</code> セクションへ移動します。
      </li>
      <li>
        <code>Create Role</code> ボタン（
        <span class="callout">1</span>）をクリックします。
      </li>
    </ol>
  </div>
  <div class="col col--8">
    <div class="card">
      <div class="card__image">
        <img
          src={WCDCreateRole}
          alt=" Weaviate Cloud のロール管理セクション"
        />
      </div>
      <div class="card__body">ロール管理セクションへアクセスします。</div>
    </div>
  </div>
</div>
<br />

<div class="row">
  <div class="col col--4">
    <ol start="4">
      <li>
        <code>Role name</code>{' '}フィールド（<span class="callout">1</span>）に、ロールの説明的な名前を入力します。
      </li>
      <li>
        <code>Collection</code> セクション（<span class="callout">2</span>）でコレクションレベルの権限を設定します:
        <ul>
          <li>
            ドロップダウンから対象コレクションを選択（
            <span class="callout">3</span>）
          </li>
          <li>
            Create、Read、Update、Delete の各 Collection 権限を選択（<span class="callout">4</span>）
          </li>
        </ul>
      </li>
      <li>
        コレクションでマルチテナンシーを使用している場合は、必要に応じて<code>Collection Tenants</code> 権限を設定します。
      </li>
      <li>
        <code>Create</code> ボタン（<span class="callout">5</span>）をクリックして新しいロールを保存します。
      </li>
    </ol>
  </div>
  <div class="col col--8">
    <div class="card">
      <div class="card__image">
        <img src={WCDCreateRoleForm} alt="新しい API ロール作成フォーム" />
      </div>
      <div class="card__body">新しいロールの権限を設定します。</div>
    </div>
  </div>
</div>
<br />

:::info

 RBAC と利用可能な権限の詳細については、[RBAC ドキュメント](/weaviate/configuration/rbac/index.mdx)を参照してください。

:::

## ロールの編集

既存のカスタムロールの権限や設定は、いつでも変更できます。

<div class="row">
  <div class="col col--4">
    <ol>
      <li>ロール管理ページで編集したいロールを探します。</li>
      <li>
        そのロールの横にある<code>Edit</code> ボタン（<span class="callout">1</span>）をクリックします。
      </li>
    </ol>
  </div>
  <div class="col col--8">
    <div class="card">
      <div class="card__image">
        <img
          src={WCDEditRole}
          alt="編集ボタンがハイライトされたロール"
        />
      </div>
      <div class="card__body">ロールの権限を変更します。</div>
    </div>
  </div>
</div>
<br />
<div class="row">
  <div class="col col--4">
    <ol start="3">
      <li>
        ロール編集画面では、以下が行えます:
        <ul>
          <li>
            Create、Read、Update、Delete 操作のチェックボックスを切り替えてコレクション権限を更新
          </li>
          <li>
            ドロップダウンメニューを使用して、権限の適用対象となるコレクションなど、ロールのスコープに追加の制約を追加・削除
          </li>
        </ul>
      </li>
      <li>
        変更が完了したら、<code>Update</code> ボタン（
        <span class="callout">1</span>）をクリックして保存します。
      </li>
    </ol>
  </div>
  <div class="col col--8">
    <div class="card">
      <div class="card__image">
        <img
          src={WCDEditRoleForm}
          alt="Update ボタンがハイライトされたロール編集フォーム"
        />
      </div>
      <div class="card__body">
        ロールの権限を編集し、更新を確定します。
      </div>
    </div>
  </div>
</div>
<br />

ロールの権限変更は、そのロールに割り当てられているすべての API キーに即時反映されます。



## ロールの削除

カスタムロールが不要になった場合は削除できます。この操作は現在そのロールに割り当てられているすべての API keys に影響します。

<div class="row">
  <div class="col col--4">
    <ol>
      <li>
        ロール管理ページで、削除したいロールを探します。
      </li>
      <li>
        対象ロールの横にある <code>Delete</code> ボタン (<span class="callout">1</span>) をクリックします。
      </li>
    </ol>
  </div>
  <div class="col col--8">
    <div class="card">
      <div class="card__image">
        <img
          src={WCDDeleteRole}
          alt="Delete ボタンがハイライトされたロール"
        />
      </div>
      <div class="card__body">
        ロールを削除する様子。
      </div>
    </div>
  </div>
</div>
<br />
<div class="row">
  <div class="col col--4">
    <ol start="3">
      <li>
        確認ダイアログで、削除を確定するためにロール名を正確に入力します (<span class="callout">1</span>)。これにより誤って削除することを防ぎます。
      </li>
      <li>
        <code>Confirm and delete</code> (<span class="callout">2</span>) をクリックしてロールを完全に削除します。
      </li>
    </ol>
  </div>
  <div class="col col--8">
    <div class="card">
      <div class="card__image">
        <img
          src={WCDDeleteRoleForm}
          alt="ロール削除確認ダイアログ"
        />
      </div>
      <div class="card__body">
        ロール名を入力して削除を確定します。
      </div>
    </div>
  </div>
</div>
<br />

ロールの削除は永久的で、取り消すことはできません。この操作により次のことが起こります:

- ロールとその関連するすべての権限が削除される  
- このロールが割り当てられていた API keys に影響する  
- このロールによって付与されていた権限に依存するアプリケーションが動作しなくなる可能性がある  

ロールを削除する前に、影響を受ける API keys を更新するか別のロールに割り当て直すようにしてください。

:::info
admin と viewer の組み込みロールは削除できません。これらはクラスタの基本的な操作に必要なシステム定義のロールだからです。
:::

## 参考リソース

- [WCD での API keys の管理](./authentication.mdx)
- [RBAC のドキュメント](/weaviate/configuration/rbac/index.mdx)

## サポート

import SupportAndTrouble from '/_includes/wcs/support-and-troubleshoot.mdx';

<SupportAndTrouble />


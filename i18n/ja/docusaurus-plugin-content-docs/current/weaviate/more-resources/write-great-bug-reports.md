---
title: 優れたバグ報告を作成する方法
sidebar_position: 99
image: og/docs/more-resources.jpg
# tags: ['how to', 'reporting a bug', 'bugfix', 'reproducing example']
---


## 優れたバグ報告を作成する

このページでは、理想的なバグ報告がどのようなものかを説明します。完璧なバグ報告を書くことが常に可能とは限らず、すべての情報を提供できないからといってバグ報告をためらってほしくはありません。ただし、エンジニアの作業を少しでも楽にできるよう、役立つ情報をお伝えします。また、バグのチケットをどの順番で対応するかを優先付けする必要がある場合もあります。十分に準備されたバグ報告は、先に対応される可能性が高くなります。

### 優れたバグ報告を際立たせる要素

以下のポイントが、バグ報告を優れたものにします。

- **コンテキストの提供**  
  特定のユースケースに取り組んでいたり、長い間特定のバグと格闘している場合、あなたやチームの頭の中には多くのコンテキストがあるでしょう。しかし、そのコンテキストはバグ報告をエンジニアに引き渡す際に失われがちです。エンジニアは全く別の作業をしていた可能性が高く、あなたにとって当たり前の目標や前提を理解しにくい場合があります。優れたバグ報告はそのコンテキストを設定し、社内外のどのエンジニアでも容易にチケットに取り組めるようにします。

- **適切な情報量**  
  バグの種類によって必要となる情報は異なります。例として 2 つのバグを考えてみましょう。1 つ目は `img2vec` モジュールを使用した際に画像が正しくベクトル化されず、結果が狂ってしまうケース。2 つ目は ID でのルックアップが予想よりもかなり遅いケースです。どちらも正当なバグですが、それぞれに必要な情報は異なります。画像ベクトル化のバグでは `img2vec` モジュールの詳細が必要です。使用したバージョンは？どの推論コンテナを実行していたか？GPU は使用していたか？画像のファイル形式は？一方、パフォーマンスのバグではハードウェアに関する情報が重要です。マシンのサイズは？どの種類のディスクを使用していたか？遅いクエリ実行中の CPU 使用率、メモリ使用量、ディスク圧迫状況は？など。すべての内部を理解している必要はありませんが、バグを再現するのに役立つ詳細と不要な詳細を考えてみてください。

- **再現が容易**  
  すべてのバグは重要で、私たちはどの報告にも感謝しています。しかし、優先順位を付ける必要があります。再現しやすいバグ報告は取り組みやすいです。優れたバグ報告には、事前状態を仮定せず完全にバグを再現できる例が含まれています。以下にバグ報告における良い再現例の例を示します。

- **特定のエリアに絞り込まれている**  
   Weaviate は Weaviate サーバーだけでなく、言語別の Weaviate クライアントや任意のモジュールなど、エコシステム全体で構成されています。モジュールが機械学習モデルを使用する場合は独自の推論コンテナを持つこともあります。優れたバグ報告は問題がどこで発生しているかをできるだけ絞り込みます。どこでバグが起きているかを確認するためのヒントを下に示します。

ここまでで *何* が優れたバグ報告を構成するかを確認しました。次は個々の分野を見て、*どのように* すればより良い報告を書けるかを説明します。

## 常に提供すべき最小限の情報とコンテキスト

- 使用したすべてのバージョンを明示してください。最低限、 Weaviate サーバーとクライアントのバージョンが必要です。  
- 最近のバージョンでバグが導入された可能性がある場合は、問題が発生しない最後のバージョンも報告してください。  
- バグの再現に重要なモジュールがある場合は、そのモジュールを指定してください。モジュールが複数のモデルを使用する場合は、モデル名も指定してください。  

## 良い再現例の提供方法

- 優れた再現例は状態を一切仮定しません。必ず空の Weaviate インスタンスから始め、バグ再現に必要なオブジェクトをインポートします。エンジニアは読み取り / 検索クエリだけからインポートすべきオブジェクトを推測できません。  
- エラー再現に必要なものはすべて再現例の一部に含めてください。エンジニアが例をコピー＆ペーストするだけで問題を確認できるようにします。  
- 再現例はコードで表現してください。これは Weaviate の言語クライアントでも、`curl` コマンドの一連でも構いません。  
- 再現例には期待していた動作を明記してください。実際の挙動が望ましくない理由が明白でない場合があります。代わりに何が起こるべきだったかをコード、コードコメント、または付随テキストで伝えてください。  

## 問題が Weaviate、クライアント、その他のどこで発生しているかの判別方法

- 問題が Weaviate サーバーではなくクライアントにあると思われる場合は、別の言語クライアントまたはクライアントを使用しない方法で同様のリクエストを送信して確認できます。後者が最も確実で、クライアントの問題を完全に排除できます。純粋な HTTP（例: `curl`, Postman など）でリクエストを送ってもエラーが再現する場合、そのエラーは Weaviate サーバー側で発生しています。  
- 言語クライアントからスタックトレースが表示された場合は、エラーがどこで発生したかを推測できます。スタックトレースにネットワークリクエスト、2xx 以外の HTTP ステータスコード、シャードやインデックスに関するエラーメッセージが含まれている場合、バグは Weaviate サーバー内で発生している可能性が高いです。反対に、その言語特有の内容が多い場合はクライアント側のエラーを示唆します。  
- Kubernetes で実行するために `weaviate-helm` リポジトリなど、 Weaviate エコシステムの他のツールを使用している場合、それらの設定で問題が発生する可能性もあります。ランタイムやマニフェスト固有のバグと思われる場合は、別のランタイムでも試してみてください。すでに試したことがあれば教えてください。  

## 上記の情報を提供することが困難な場合

心配はいりません。バグが複雑で再現が容易でないこともあると理解しています。完璧なバグ報告を書くのが難しい場合でも、ぜひ報告してください。良い報告を作成しようとしてくださる姿勢を私たちは大いに歓迎します。

## ありがとうございます

Weaviate へのバグ報告は Weaviate への貢献です。私たちは、  
問題を報告し、Weaviate を改善するために時間を割いてくださり、本当に感謝しています。ありがとうございます！


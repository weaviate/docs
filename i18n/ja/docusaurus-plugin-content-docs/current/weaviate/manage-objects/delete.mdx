---
title: オブジェクトの削除
sidebar_position: 35
image: og/docs/howto.jpg
---



import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import FilteredTextBlock from '@site/src/components/Documentation/FilteredTextBlock';
import PyCode from '!!raw-loader!/_includes/code/howto/manage-data.delete.py';
import PyCodeV3 from '!!raw-loader!/_includes/code/howto/manage-data.delete-v3.py';
import TSCode from '!!raw-loader!/_includes/code/howto/manage-data.delete.ts';
import TSCodeLegacy from '!!raw-loader!/_includes/code/howto/manage-data.delete-v2.ts';
import JavaCode from '!!raw-loader!/_includes/code/howto/java/src/test/java/io/weaviate/docs/manage-data.delete.java';
import GoCode from '!!raw-loader!/_includes/code/howto/go/docs/manage-data.delete_test.go';
import SkipLink from '/src/components/SkipValidationLink'


Weaviate では、オブジェクトを ID または条件のセットで削除できます。


import RestObjectsCRUDClassnameNote from '/_includes/rest-objects-crud-classname-note.md';

<details>
  <summary>追加情報</summary>

  - オブジェクトを削除するには、コレクション名と識別条件（例: オブジェクト ID やフィルター）を指定する必要があります。
  - [マルチテナンシー](../concepts/data.md#multi-tenancy) コレクションの場合、オブジェクトを削除する際にテナント名も指定する必要があります。方法の詳細については、[データ管理: マルチテナンシー操作]( ../manage-collections/multi-tenancy.mdx) を参照してください。
  <br/>

  <RestObjectsCRUDClassnameNote/>

</details>


## ID でのオブジェクト削除

ID で削除するには、コレクション名とオブジェクト ID を指定します。

<Tabs groupId="languages">
  <TabItem value="py" label="Python Client v4">
    <FilteredTextBlock
      text={PyCode}
      startMarker="# START DeleteObject"
      endMarker="# END DeleteObject"
      language="py"
    />
  </TabItem>
  <TabItem value="py3" label="Python Client v3">
    <FilteredTextBlock
      text={PyCodeV3}
      startMarker="# START DeleteObject"
      endMarker="# END DeleteObject"
      language="pyv3"
    />
  </TabItem>

  <TabItem value="js" label="JS/TS Client v3">
    <FilteredTextBlock
      text={TSCode}
      startMarker="// START DeleteObject"
      endMarker="// END DeleteObject"
      language="ts"
    />
  </TabItem>

  <TabItem value="js2" label="JS/TS Client v2">
    <FilteredTextBlock
      text={TSCodeLegacy}
      startMarker="// START DeleteObject"
      endMarker="// END DeleteObject"
      language="tsv2"
    />
  </TabItem>

  <TabItem value="java" label="Java">
    <FilteredTextBlock
      text={JavaCode}
      startMarker="// START DeleteObject"
      endMarker="// END DeleteObject"
      language="java"
    />
  </TabItem>

  <TabItem value="go" label="Go">
    <FilteredTextBlock
      text={GoCode}
      startMarker="// START DeleteObject"
      endMarker="// END DeleteObject"
      language="go"
    />
  </TabItem>
</Tabs>


<!-- ## Error handling

If the id doesn't exist in the specified class, a 404 error will be returned.

You can handle errors as follows:

<Tabs groupId="languages">
  <TabItem value="py" label="Python">
    <FilteredTextBlock
      text={PyCode}
      startMarker="# START DeleteError"
      endMarker="# END DeleteError"
      language="py"
    />
  </TabItem>

  <TabItem value="js" label="JS/TS Client v2">
    <FilteredTextBlock
      text={TSCode}
      startMarker="// START DeleteError"
      endMarker="// END DeleteError"
      language="tsv2"
    />
  </TabItem>
</Tabs> -->



## 複数オブジェクトの削除

特定の条件に一致するオブジェクトを削除するには、コレクションと [`where` フィルター](../search/similarity.md) を指定します。

<Tabs groupId="languages">
  <TabItem value="py" label="Python Client v4">
    <FilteredTextBlock
      text={PyCode}
      startMarker="# START DeleteBatch"
      endMarker="# END DeleteBatch"
      language="py"
    />
  </TabItem>

  <TabItem value="py3" label="Python Client v3">
    <FilteredTextBlock
      text={PyCodeV3}
      startMarker="# START DeleteBatch"
      endMarker="# END DeleteBatch"
      language="pyv3"
    />
  </TabItem>

  <TabItem value="js" label="JS/TS Client v3">
    <FilteredTextBlock
      text={TSCode}
      startMarker="// START DeleteBatch"
      endMarker="// END DeleteBatch"
      language="ts"
    />
  </TabItem>

  <TabItem value="js2" label="JS/TS Client v2">
    <FilteredTextBlock
      text={TSCodeLegacy}
      startMarker="// START DeleteBatch"
      endMarker="// END DeleteBatch"
      language="tsv2"
    />
  </TabItem>

  <TabItem value="java" label="Java">
    <FilteredTextBlock
      text={JavaCode}
      startMarker="// START DeleteBatch"
      endMarker="// END DeleteBatch"
      language="java"
    />
  </TabItem>

  <TabItem value="go" label="Go">
    <FilteredTextBlock
      text={GoCode}
      startMarker="// START DeleteBatch"
      endMarker="// END DeleteBatch"
      language="go"
    />
  </TabItem>
</Tabs>

<details>
  <summary>追加情報</summary>

- 1 回のクエリで削除できるオブジェクト数には、設定可能な最大値 ([QUERY_MAXIMUM_RESULTS](/deploy/configuration/env-vars/index.md#general)) があり、デフォルトでは 10,000 件です。上限を超えて削除する場合は、クエリを再実行してください。

</details>


### ContainsAny / ContainsAll

特定の条件でオブジェクトを削除する際には、`ContainsAny` / `ContainsAll` フィルターを使用します。

<Tabs groupId="languages">
  <TabItem value="py" label="Python Client v4">
    <FilteredTextBlock
      text={PyCode}
      startMarker="# START DeleteContains"
      endMarker="# END DeleteContains"
      language="py"
    />
  </TabItem>

  <TabItem value="py3" label="Python Client v3">
    <FilteredTextBlock
      text={PyCodeV3}
      startMarker="# START DeleteContains"
      endMarker="# END DeleteContains"
      language="pyv3"
    />
  </TabItem>

  <TabItem value="js" label="JS/TS Client v3">
    <FilteredTextBlock
        text={TSCode}
        startMarker="// START DeleteContain"
        endMarker="// END DeleteContain"
        language="ts"
      />
  </TabItem>

  <TabItem value="js2" label="JS/TS Client v2">

```js
await client.batch
  .objectsBatchDeleter()
  .withClassName('EphemeralObject')
  .withWhere({
    path: ['name'],
    // highlight-start
    operator: 'ContainsAny',
    valueTextArray: ['asia', 'europe'],  // Note the array syntax
    // highlight-end
  })
  // highlight-end
  .do();
```

  </TabItem>

  <TabItem value="java" label="Java">

```java
client.batch().objectsBatchDeleter()
  .withClassName("EphemeralObject")
  .withWhere(WhereFilter.builder()
    .path("name")
    // highlight-start
    .operator(Operator.ContainsAny)
    .valueText("asia", "europe")    // Note the array syntax
    // highlight-end
    .build())
  .run();
```

  </TabItem>
  <TabItem value="go" label="Go">

```go
  response, err := client.Batch().ObjectsBatchDeleter().
    WithClassName("EphemeralObject").
    WithOutput("minimal").
    WithWhere(filters.Where().
      WithPath([]string{"name"}).
      // highlight-start
      WithOperator(filters.ContainsAny).
      WithValueText("asia", "europe")).  // Note the array syntax
      // highlight-end
    Do(ctx)
```

  </TabItem>
</Tabs>

<details>
  <summary>追加情報</summary>

この機能は Weaviate `v1.21` で追加されました。

</details>

## id で複数オブジェクトの削除

複数のオブジェクトをその id 値で削除するには、`id` ベースの条件を持つフィルター（例: `ContainsAny`）を使用します。

<details>
  <summary>制限事項</summary>

1 回のクエリで削除できるオブジェクト数には上限（`QUERY_MAXIMUM_RESULTS`）があります。これは、予期しないメモリ急増やクライアント側のタイムアウト、ネットワーク中断が発生しやすい長時間実行リクエストから保護するためです。

オブジェクトは取得される場合と同じ順序、つまり UUID の順序で削除されます。上限を超える数を削除したい場合は、オブジェクトが一致しなくなるまで同じクエリを複数回実行してください。

既定の `QUERY_MAXIMUM_RESULTS` 値は 10,000 です。この値は、たとえば [環境変数](/deploy/configuration/env-vars/index.md) で変更可能です。

</details>

<Tabs groupId="languages">
  <TabItem value="py" label="Python Client v4">
    <FilteredTextBlock
      text={PyCode}
      startMarker="# START DeleteByIDBatch"
      endMarker="# END DeleteByIDBatch"
      language="py"
    />
  </TabItem>

  <TabItem value="py3" label="Python Client v3">
    <FilteredTextBlock
      text={PyCodeV3}
      startMarker="# START DeleteByIDBatch"
      endMarker="# END DeleteByIDBatch"
      language="pyv3"
    />
  </TabItem>

  <TabItem value="js" label="JS/TS Client v3">
    <FilteredTextBlock
          text={TSCode}
          startMarker="// START DeleteByIDBatch"
          endMarker="// END DeleteByIDBatch"
          language="ts"
        />
  </TabItem>

  <TabItem value="js2" label="JS/TS Client v2">

```js
await client.batch
  .objectsBatchDeleter()
  .withClassName('EphemeralObject')
  .withWhere({
    path: ['id'],
    // highlight-start
    operator: 'ContainsAny',
    valueTextArray: ['12c88739-7a4e-49fd-bf53-d6a829ba0261', '3022b8be-a6dd-4ef4-b213-821f65cee53b', '30de68c1-dd53-4bed-86ea-915f34faea63'],  // Note the array syntax
    // highlight-end
  })
  // highlight-end
  .do();
```

  </TabItem>

  <TabItem value="java" label="Java">

```java
client.batch().objectsBatchDeleter()
  .withClassName("EphemeralObject")
  .withWhere(WhereFilter.builder()
    .path("id")
    // highlight-start
    .operator(Operator.ContainsAny)
    .valueText("12c88739-7a4e-49fd-bf53-d6a829ba0261", "3022b8be-a6dd-4ef4-b213-821f65cee53b", "30de68c1-dd53-4bed-86ea-915f34faea63")    // Note the array syntax
    // highlight-end
    .build())
  .run();
```

  </TabItem>
  <TabItem value="go" label="Go">

```go
  response, err := client.Batch().ObjectsBatchDeleter().
    WithClassName("EphemeralObject").
    WithOutput("minimal").
    WithWhere(filters.Where().
      WithPath([]string{"id"}).
      // highlight-start
      WithOperator(filters.ContainsAny).
      WithValueText("12c88739-7a4e-49fd-bf53-d6a829ba0261", "3022b8be-a6dd-4ef4-b213-821f65cee53b", "30de68c1-dd53-4bed-86ea-915f34faea63")).  // Note the array syntax
      // highlight-end
    Do(ctx)
```

  </TabItem>
</Tabs>

## すべてのオブジェクトの削除

オブジェクトは Weaviate 内のコレクションに属している必要があります。そのため、[コレクションを削除](../manage-collections/collection-operations.mdx#delete-a-collection)すると、そこに含まれるすべてのオブジェクトも削除されます。

## 追加パラメーター

- `dryRun` を使用すると、実際に削除を行わずに何件のオブジェクトが削除対象になるかを確認できます。
- `output` に `'verbose'` を設定すると、各削除について詳細（ ID と削除ステータス）を確認できます。

<Tabs groupId="languages">
  <TabItem value="py" label="Python Client v4">
    <FilteredTextBlock
      text={PyCode}
      startMarker="# START DryRun"
      endMarker="# END DryRun"
      language="py"
    />
  </TabItem>

  <TabItem value="py3" label="Python Client v3">
    <FilteredTextBlock
      text={PyCodeV3}
      startMarker="# START DryRun"
      endMarker="# END DryRun"
      language="pyv3"
    />
  </TabItem>

  <TabItem value="js" label="JS/TS Client v3">
    <FilteredTextBlock
      text={TSCode}
      startMarker="// START DryRun"
      endMarker="// END DryRun"
      language="ts"
    />
  </TabItem>

  <TabItem value="js2" label="JS/TS Client v2">
    <FilteredTextBlock
      text={TSCodeLegacy}
      startMarker="// START DryRun"
      endMarker="// END DryRun"
      language="tsv2"
    />
  </TabItem>

  <TabItem value="java" label="Java">
    <FilteredTextBlock
      text={JavaCode}
      startMarker="// START DryRun"
      endMarker="// END DryRun"
      language="java"
    />
  </TabItem>

  <TabItem value="go" label="Go">
    <FilteredTextBlock
      text={GoCode}
      startMarker="// START DryRun"
      endMarker="// END DryRun"
      language="go"
    />
  </TabItem>
</Tabs>


<details>
  <summary>レスポンス例</summary>

以下のようなレスポンスが返されます:

<FilteredTextBlock
  text={PyCodeV3}
  startMarker="# START ResultsDryRun"
  endMarker="# END ResultsDryRun"
  language="json"
/>

</details>





## 関連ページ

- [Weaviate に接続する](/weaviate/connections/index.mdx)
- <SkipLink href="/weaviate/api/rest#tag/objects">リファレンス: REST - /v1/objects</SkipLink>

## 質問とフィードバック

import DocsFeedback from '/_includes/docs-feedback.mdx';

<DocsFeedback/>


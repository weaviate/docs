---
title: モデル選定のワークフロー
description: 埋め込みモデル選定のワークフロー
---

import ThemedImage from '@theme/ThemedImage';

## <i class="fa-solid fa-chalkboard-user"></i> 概要

適切な埋め込みモデルを選択することは複雑な作業です。その大きな理由は、各モデルがトレードオフを伴う強みと弱みを持っているためです。

明らかなトレードオフの 1 つは、モデルの性能・サイズ・コストの関係です。下の図は、埋め込みモデルにおけるモデルサイズと検索性能の一般的な相関を示しています。

<img
    src={require('./_img/embedding_model_evaluation.png').default}
    alt="埋め込みモデル評価"
/>

図からは、モデルサイズが大きいほど性能が高いという明確な正の相関が見て取れます。つまり、性能の高いモデルは一般的にサイズも大きくなります。その結果、より多くのメモリと計算資源を必要とし、コストが高くなり速度も遅くなります。

言い換えると、 `nv-embed-v2` のような大型モデルは、 `snowflake-arctic-embed-m-v1.5` のような小型モデルより検索性能が優れているかもしれませんが、実行や利用にかかる費用は高くなる可能性があります。

しかし、検討すべき観点はほかにも多数あります。例として以下が挙げられます。

- `gemini` のようなプロプライエタリモデルは高い性能を示すかもしれませんが、ローカル推論を希望するユーザーの要件を満たさない場合があります。
- モデルが標準ベンチマークで高い性能を示していても、法律・医療・コーディングなどの専門領域のデータでは性能が落ちることがあります。
- ローカルモデルは運用コストが低い場合がありますが、組織に長期的なインフラ保守のための専門知識やリソースが不足しているかもしれません。

このように複雑な状況では、体系的なアプローチによって自分の要件に基づく適切な意思決定が可能になります。以下はその一例です。

<ThemedImage
  alt="埋め込みモデル選択ワークフロー"
  sources={{
    light: require('./_img/embedding_model_selection_workflow.png').default,
    dark: require('./_img/embedding_model_selection_workflow_dark.png').default,
  }}
  style={{ maxWidth: "50%" }}
/>

このワークフローは、上図のように 4 つの主要なステージで構成されています。

1. **ニーズの特定**: 要件や好みを明確にし、今後の指針となるガイドラインを策定します。  
2. **候補モデルのリストアップ**: 特定したニーズと公開情報を基に、適合しそうなモデルをスクリーニングします。  
3. **詳細評価の実施**: 自分のユースケースに合わせて、選択したデータでモデルを評価します。  
4. **定期的な再評価**: 要件（データ・アプリケーション）や環境（新モデル・プロバイダー）の変化を継続的に監視します。  

次に、各ステージを順番に確認します。

## 質問とフィードバック

import DocsFeedback from '/_includes/docs-feedback.mdx';

<DocsFeedback/>
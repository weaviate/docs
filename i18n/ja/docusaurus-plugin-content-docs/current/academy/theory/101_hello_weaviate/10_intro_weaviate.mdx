---
title: Weaviate 入門
description: Weaviate 理論の概要
---

## <i class="fa-solid fa-square-chevron-right"></i> Weaviate とは

import ReactPlayer from 'react-player/lazy'

<ReactPlayer className="react-player" url='https://youtu.be/MQgm126pKkU' controls='true' />
<br/>

 Weaviate はオープンソースの ベクトル データベースです。ですが、それは具体的にどういう意味でしょうか？ここで詳しく見ていきましょう。

### <i class="fa-solid fa-chalkboard"></i> ベクトル データベース

 Weaviate は、必要な情報を素早く正確に取得できる優れたツールです。その核心となるのが、卓越した **ベクトル データベース** である点です。

従来の SQL を使うリレーショナルデータベースなどはご存じかもしれません。データベースは情報を整理し、保存し、検索できます。**ベクトル** データベースも同じことができますが、大きな違いは「類似度」に基づいて操作できる点です。

#### <i class="fa-solid fa-memo-pad"></i> 従来の検索方法

ヨーロッパの都市に関する記事を収めたリレーショナルデータベースから、「主要な」ヨーロッパの都市を取得したいと想像してください。SQL で次のようなクエリを書くかもしれません。

```sql
SELECT city_name wiki_summary
FROM wiki_city
WHERE (wiki_summary LIKE '%major European city%' OR
       wiki_summary LIKE '%important European city%' OR
       wiki_summary LIKE '%prominent European city%' OR
       wiki_summary LIKE '%leading European city%' OR
       wiki_summary LIKE '%significant European city%' OR
       wiki_summary LIKE '%top European city%' OR
       wiki_summary LIKE '%influential European city%' OR
       wiki_summary LIKE '%notable European city%')
    (… and so on)
```

このクエリは、`wiki_summary` 列にこれらの文字列（`major`、`important`、`prominent` など）が含まれる都市を返します。

多くの場面で問題なく機能しますが、この方法には大きく 2 つの制約があります。

#### <i class="fa-solid fa-memo-pad"></i> 従来検索の制約

この検索方法では、概念を表すかもしれない語句を自分で特定する必要があります。これは簡単ではありません。

さらに、結果として得られたオブジェクトをどのようにランキングするかという問題も解決できません。

上記の検索では、関連性の低い「別のヨーロッパの都市」についての記述がたった一度登場しただけのエントリでも、パリやローマといった高い関連性を持つエントリと同じ重み付けになります。

ベクトル データベースは、類似度検索によってこの作業をよりシンプルにします。

#### <i class="fa-solid fa-memo-pad"></i> ベクトル検索の例

完全一致を探す代わりに、「Major European city」に *最も近い* オブジェクトを検索するクエリを実行できます。

その結果として返ってくるのは、クエリとの *類似度でランク付けされた* エントリのリストです。

言い換えると、結果は「Major European city」というアイデア、つまり意味に対する類似度を反映します。

さらに、 Weaviate はデータを類似度に基づいて「インデックス化」するため、この種のデータ取得を非常に高速に行えます。

 Weaviate はこれらすべてを手助けし、実際にはさらに多くのことが可能です。別の言い方をすれば、 Weaviate は情報の活用方法を強化します。

:::info ベクトル検索 vs セマンティック検索
ベクトル検索は「セマンティック検索」とも呼ばれます。意味（セマンティクス）の類似度に基づいて結果を返すためです。
:::

### <i class="fa-solid fa-chalkboard"></i> オープンソース

 Weaviate はオープンソースです。つまり、その [コードベースはオンラインで公開](https://github.com/weaviate/weaviate) されており、誰でも閲覧・利用できます<sup>[(1)](#-notes)</sup>。

しかも、それはどのように利用しても *同じ* コードベースです。自身の PC で動かす場合も、クラウド環境で動かす場合も、マネージドサービスである [Weaviate Cloud (WCD)](https://console.weaviate.cloud/) を使う場合も、まったく同じ技術を使用しています。

そのため、希望すれば自身のデバイスで無料で Weaviate を動かしたり、利便性のためにマネージドサービスを利用したりできます。さらに、実際に何を動かしているかを確認でき、オープンソースコミュニティの一員として開発に貢献することも可能です。

また、 Weaviate に関する知識はローカル、クラウド、マネージドインスタンス間で互換性があります。WCD で学んだことはローカル環境でも同様に適用でき、その逆も同じです。😉

### <i class="fa-solid fa-chalkboard"></i> 情報をダイナミックに

情報を本のような静的なものとして捉えがちですが、 Weaviate と現代の AI 駆動型言語モデルを組み合わせれば、単に静的情報を取得するだけでなく、その上に簡単に構築できます。以下の例をご覧ください。

#### <i class="fa-solid fa-memo-pad"></i> 質問応答

Wikipedia のエントリ一覧があるとして、 Weaviate に次のように尋ねられます。

:::note We asked Weaviate:
When was Lewis Hamilton born?
:::

すると、次のように回答します。

:::note Weaviate responded:
Lewis Hamilton was born on January 7, 1985. ([check for yourself](https://en.wikipedia.org/wiki/Lewis_Hamilton))
:::

#### <i class="fa-solid fa-memo-pad"></i> 生成検索

あるいは、 Weaviate で取得した情報を使って文章を合成することもできます。

次の例では、「レーシングドライバー」に関するエントリを検索し、以下の形式で結果を生成しています。

:::note We asked Weaviate:
Write a fun tweet encouraging people to read about this: ## \{title} by summarizing highlights from: ## \{wiki_summary}
:::

生成された結果は以下のとおりです。

:::note Weaviate responded:
Check out the amazing story of Lewis Hamilton, the 7-time Formula One World Drivers' Championship winner! From his humble beginnings to becoming one of the world's most influential people, his journey is an inspiring one. #LewisHamilton #FormulaOne #Motorsport #Racing
:::

これらに加え、ベクトライゼーション、要約、分類など、さらに多くの機能をユニットで取り上げます。

現時点では、 Weaviate はベクトル データベースを核とし、取得した情報に対して AI ツールを活用してより多くのことを実現できる、と覚えておいてください。

## <i class="fa-solid fa-square-chevron-right"></i> まとめ

このセクションでは、 Weaviate が何であるか、そして概要レベルでどのように機能するかを学びました。また、ベクトル検索とは「類似度ベースの検索方法」であるという高レベルの概念も紹介しました。

### <i class="fa-solid fa-pen-to-square"></i> 練習問題

<Quiz questions={weaviateOpenSource} />

<Quiz questions={vectorSearchDefinition} />

<!-- Can you describe, in your own sentence, what vector search is?

:::warning TODO
Input box for user to put answer in and get back a similarity score & our definition?
- What is a vector search
- What is Weaviate
::: -->
### <i class="fa-solid fa-lightbulb-on"></i> 主なポイント

- Weaviate はオープンソースのベクトルデータベースです。  
- Weaviate のコアライブラリは、ローカル、クラウド、または WCD で実行しても同じです。  
- ベクトル検索は類似度ベースの検索です。  
- Weaviate は、取得したデータを返す前に変換することもできます。  

## <i class="fa-solid fa-square-chevron-right"></i> 注記

<a name="1"></a>(1) もちろん、ライセンス条件に従います。

## 質問とフィードバック

import DocsFeedback from '/_includes/docs-feedback.mdx';

<DocsFeedback/>

import Quiz from '/src/components/Academy/quiz.js'
export const weaviateOpenSource = [
  {
    questionText: 'What is the difference in the Weaviate codebase between local and cloud deployments?',
    answerOptions: [
      { answerText: 'Cloud deployments always include additional modules.', isCorrect: false, feedback: 'Cloud deployments of Weaviate do not include any special, or additional, modules.'},
      { answerText: 'Local deployments are optimized for GPU use.', isCorrect: false, feedback: 'GPU usage can be enabled for inference whether locally or remotely deployed.'},
      { answerText: 'Cloud deployments are optimized for scalability.', isCorrect: false, feedback: 'We agree that cloud deployments should be optimized for scalability. But the Weaviate codebase is built for scalability regardless of deployment location.'},
      { answerText: 'None, they are the same.', isCorrect: true, feedback: 'They are the same, open-source codebase available on GitHub.'},
    ],
  },
];
export const vectorSearchDefinition = [
  {
    questionText: 'What is the best description of vector search?',
    answerOptions: [
      { answerText: 'Vector search is a directional search.', isCorrect: false, feedback: 'The definition of "vector" in this context is not direction-related.'},
      { answerText: 'Vector search is a similarity-based search.', isCorrect: true, feedback: 'It searches a data collection or database for proximity in its representation of "meaning".'},
      { answerText: 'Vector search is a number-based search.', isCorrect: false, feedback: 'This is partially true, but not the best answer. While there are numbers involved, that description does not quite capture the key concept of vector searches.'},
    ],
  },
];
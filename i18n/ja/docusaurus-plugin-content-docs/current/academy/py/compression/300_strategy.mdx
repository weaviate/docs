---
title: 圧縮戦略
---

 PQ 、 BQ 、または圧縮なしの中から選ぶ場合、どれを選択すべきでしょうか。答えは「場合によります」。

 PQ と BQ はどちらもロスあり圧縮手法であり、その選択はお客様の状況、モデル、ユースケースによって異なります。

## <i class="fa-solid fa-chalkboard"></i> インデックスの種類

 PQ は現在  HNSW  インデックスでのみサポートされています。一方、 BQ は  HNSW  と  flat  の両方のインデックスでサポートされています。 flat インデックスを使用している場合は  BQ  を使用する必要があります。

## <i class="fa-solid fa-chalkboard"></i> モデル適合性

 PQ は一般的により堅牢な圧縮手法です。トレーニング時にお客様のデータに合わせて適合されるため、モデルが  PQ  に適しているかどうかをそれほど心配する必要はありません。

これに対して  BQ  は、モデルの長さやバイナリ量子化向けに設計されているかどうかなど、モデルに対してより敏感です。

モデルが  BQ  に適しているか分からない場合は、 PQ の使用を推奨します。

## <i class="fa-solid fa-chalkboard"></i> 調整可能性

ご覧のとおり、 PQ のパラメーターは調整可能ですが、 BQ はそうではありません。つまり、圧縮の恩恵を受けつつ、リコールや  QPS  目標などのパフォーマンス指標に対して  PQ  を強めたり弱めたり調整できます。

## <i class="fa-solid fa-chalkboard"></i> 複雑さ

実装が最も簡単な解決策をお探しの場合は、 BQ  が最適です。訓練セットがそろうのを待つ必要がなく、すぐに有効化できるシンプルな設定です。

## <i class="fa-solid fa-chalkboard"></i> 結論

まとめると、どの圧縮手法を選ぶかはお客様の状況、モデル、ユースケースによって異なります。

しかし一般的な経験則として、迷った場合は  PQ  を選ぶことを推奨します。 PQ はより堅牢で調整可能であり、より幅広いモデルやユースケースに適しています。

リソース制約が問題でなければ、圧縮をまったく使用しないという選択肢もあります。これにより最高のパフォーマンスが得られますが、その分リソース要件は増大します。

ただし後から圧縮をオンにすることは、データの再インデックスが必要になるため通常は不可能です。（ただしデータセットが大きすぎない限り、 PQ だけは [後から有効化できます](../../../weaviate/configuration/compression/pq-compression.md#3-enable-pq-and-create-the-codebook)。）

## 質問とフィードバック

import DocsFeedback from '/_includes/docs-feedback.mdx';

<DocsFeedback/>
---
title: トークナイゼーションの概要
---

トークナイゼーションとは、テキストをトークンと呼ばれるより小さな単位に分割する処理です。これは、テキストを多様な文脈で扱う方法に影響を与える重要なステップです。

例えば、次のようなテキストを考えてみましょう:

```text
Ankh-Morpork's police captain
```

このテキストは、さまざまな方法でトークン化できます。以下はすべて正しいトークナイゼーションの例です。

1. `["Ankh-Morpork's", "police", "captain"]`
1. `["ankh", "morpork", "police", "captain"]`
1. `['An', '##kh', '-', 'Mo', '##rp', '##or', '##k', "'", 's', 'police', 'captain']`

方法 1 と 2 は単語トークナイゼーションの例であり、方法 3 はサブワード トークナイゼーションの例です。

トークナイゼーション方式の選択は、テキストが使用される文脈によって異なります。

### <i class="fa-solid fa-chalkboard"></i> キーワード検索・フィルタリング向け

トークナイゼーション方式の選択は、キーワード検索とフィルタリングの結果に大きく影響し、ユーザーの期待に合う場合もあれば外れる場合もあります。

テレビ番組のデータベースでは、`"Superman"` や `"Clark"` という検索で `"Lois & Clark: The New Adventures of Superman"` がヒットすることを期待します。適切なトークナイゼーション方式を選択すれば、これを実現できます。

しかし、メールアドレスのデータベースでは、`"john@example.com"` の検索結果に `"john.doe@example.com"` が含まれることは想定しません。この場合、上記とは異なるトークナイゼーション戦略が必要になるでしょう。

では、その中間的なケースはどうでしょうか。`"clark"` や `"lois and clark"` の検索で番組を含めるべきかどうかは、検索をどのように機能させたいかによって決まります。

このような多様なニーズに対応するため、 Weaviate ではユースケースに合わせてトークナイゼーション方式を設定できます。次のセクションからは、 Weaviate で利用できるトークナイゼーション方式とその設定方法について説明します。

### <i class="fa-solid fa-chalkboard"></i> 言語モデル向け

言語モデルは、テキスト全体の意味を理解し、埋め込みや生成を行います。そのため、言語モデル用の各トークンは意味を表現するよう設計されています。

語彙サイズを適切に保ちつつテキストの意味を捉えるために、サブワード トークナイゼーション（上記方法 3）がよく採用されます。これは言語モデルのアーキテクチャの重要な要素です。

ただしユーザーレベルでは、トークナイゼーション方式を意識する必要はありません。モデルの開発（学習）と利用（推論）の間で方式を一致させる必要があるため、トークナイゼーションはモデルに組み込まれています。

そのため、 Weaviate でテキストを ベクトル化 したり、検索拡張生成 (RAG) を行ったりする場合でも、トークナイゼーション方式を気にする必要はありません。選択したモデルが自動的に処理します。

結果として、このコースでは言語モデルの文脈におけるトークナイゼーションの詳細には触れません。

:::info 言語モデル用トークナイゼーションに興味がありますか？
この分野は奥が深く、学ぶことが多くあります。詳細を知りたい場合は、 Hugging Face が提供する [トピックの概念ガイド](https://huggingface.co/transformers/tokenizer_summary.html) が参考になります。さらに、 Hugging Face の `transformers` ライブラリを使用した [トークナイザー利用ガイド](https://huggingface.co/learn/nlp-course/en/chapter2/4) もご覧ください。
:::

## 質問とフィードバック

import DocsFeedback from '/_includes/docs-feedback.mdx';

<DocsFeedback/>
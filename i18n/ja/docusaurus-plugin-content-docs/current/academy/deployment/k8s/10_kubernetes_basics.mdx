---
title: Kubernetes クラスターの作成
---

 **Kubernetes** はオープンソースの *コンテナー オーケストレーション* プラットフォームです。つまり、 Kubernetes を使用すると、 [コンテナ化](https://www.docker.com/resources/what-container/) されたアプリケーションをデプロイ、スケール、および管理できます。

本番環境では、 Kubernetes は AWS、 Google Cloud、 Azure などのクラウド プロバイダー上やオンプレミスのインフラストラクチャ上にあるノード クラスターを管理するために使用されます。

ここでは、 **Minikube** という便利なツールを使って、開発およびテスト目的でローカル マシン上に Kubernetes クラスターを実行する方法を学びます。

:::info 本番環境の Kubernetes クラスターをお持ちの場合
本番環境の Kubernetes クラスターに Weaviate をデプロイしたい場合も手順はほぼ同じです。 Minikube を本番環境の Kubernetes クラスターに置き換えるだけです。

Kubernetes デプロイメントには多くのバリエーションがあるため、ご利用のクラウド プロバイダーや Kubernetes ディストリビューションが提供するデプロイ手順に従うことをおすすめします。
:::

## <i class="fa-solid fa-square-chevron-right"></i> 前提条件

このチュートリアルでは、次のツールが必要です。

- ** Minikube ** : ローカル マシン上で Kubernetes クラスターを実行するツール。ローカルで Kubernetes デプロイメントをテストするために使用します。  
- ** kubectl ** : Kubernetes のコマンドライン ツール。 Kubernetes クラスターとの対話に使用します。  
- ** Docker ** : アプリケーションをコンテナーで開発、配布、実行できるプラットフォーム。 Minikube の [*driver*](https://minikube.sigs.k8s.io/docs/drivers/) として Docker をインストールし、ローカル マシン上で Kubernetes クラスターを仮想化します。 Minikube は別のドライバーを使用してもかまいませんが、 Docker が最も一般的です。  
- ** Helm ** : Kubernetes 用のパッケージ マネージャー。 Kubernetes 上でアプリケーションをインストールおよび管理するために使用します。  

### <i class="fa-solid fa-code"></i> インストール

これらのツールがインストールされていない場合は、以下のリンク先の手順に従ってインストールしてください。

- [ Minikube ](https://minikube.sigs.k8s.io/docs/start/)
- [ kubectl ](https://kubernetes.io/docs/tasks/tools/#kubectl)
- [ Docker ](https://docs.docker.com/get-docker/)
- [ Helm ](https://helm.sh/docs/intro/install/)

インストール後、次のコマンドを実行してインストールを確認します。

```bash
minikube version
kubectl version --client
docker --version
helm version
```

次のような出力が表示されます。

```bash
minikube version: v1.32.0
commit: 8220a6eb95f0a4d75f7f2d7b14cef975f050512d
Client Version: v1.28.2
Kustomize Version: v5.0.4-0.20230601165947-6ce0bf390ce3
Docker version 24.0.7, build afdd53b
version.BuildInfo{Version:"v3.12.2", GitCommit:"1e210a2c8cc5117d1055bfaa5d40f51bbc2e345e", GitTreeState:"clean", GoVersion:"go1.20.6"}
```

同様の出力が得られれば、準備完了です。

表示されるバージョンは上記と異なる場合があります。最新バージョンがインストールされていることを確認してください。

## <i class="fa-solid fa-square-chevron-right"></i> Minikube の実行

準備ができたら Minikube を起動します。以下のコマンドを実行してください。

```bash
minikube start
```

すると、次のような出力が表示される場合があります。

```bash
😄  minikube v1.32.0 on Darwin 14.4.1 (arm64)
✨  Automatically selected the docker driver. Other choices: vmware, ssh
📌  Using Docker Desktop driver with root privileges
👍  Starting control plane node minikube in cluster minikube
🚜  Pulling base image ...
💾  Downloading Kubernetes v1.28.3 preload ...
    > preloaded-images-k8s-v18-v1...:  341.16 MiB / 341.16 MiB  100.00% 42.00 M
    > gcr.io/k8s-minikube/kicbase...:  410.56 MiB / 410.58 MiB  100.00% 42.28 M
🔥  Creating docker container (CPUs=2, Memory=8100MB) ...
🐳  Preparing Kubernetes v1.28.3 on Docker 24.0.7 ...
    ▪ Generating certificates and keys ...
    ▪ Booting up control plane ...
    ▪ Configuring RBAC rules ...
🔗  Configuring bridge CNI (Container Networking Interface) ...
🔎  Verifying Kubernetes components...
    ▪ Using image gcr.io/k8s-minikube/storage-provisioner:v5
🌟  Enabled addons: storage-provisioner, default-storageclass
🏄  Done! kubectl is now configured to use "minikube" cluster and "default" namespace by default
```

素晴らしいです! Minikube を使って Kubernetes クラスターを起動できました。最後のコメントに `kubectl is now configured to use "minikube" cluster and "default" namespace by default` と表示されている点に注目してください。これで `kubectl` を使用して Kubernetes クラスターと対話できます。

### <i class="fa-solid fa-code"></i> クラスターの確認

次のコマンドを実行すると、

```bash
kubectl get pods -A
```

クラスター内で稼働している Pod が表示されます。例としては以下のようになります。

```bash
NAMESPACE     NAME                               READY   STATUS    RESTARTS   AGE
kube-system   coredns-5dd5756b68-qhfch           1/1     Running   0          26s
kube-system   etcd-minikube                      1/1     Running   0          42s
kube-system   kube-apiserver-minikube            1/1     Running   0          40s
kube-system   kube-controller-manager-minikube   1/1     Running   0          42s
kube-system   kube-proxy-xwdgf                   1/1     Running   0          26s
kube-system   kube-scheduler-minikube            1/1     Running   0          40s
kube-system   storage-provisioner                1/1     Running   0          39s
```

上記と似た出力が得られれば、おめでとうございます! Minikube を使用してローカル マシン上に Kubernetes クラスターを立ち上げることに成功しました。

次は、 Helm を利用して Weaviate を Kubernetes クラスターにデプロイする方法を学びます。


## 質問とフィードバック

import DocsFeedback from '/_includes/docs-feedback.mdx';

<DocsFeedback/>